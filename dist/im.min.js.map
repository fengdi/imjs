{"version":3,"sources":["../im.js"],"names":[],"mappings":"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","file":"im.min.js","sourcesContent":["/*\r\n ______                                  \r\n/\\__  _\\                    __           \r\n\\/_/\\ \\/     ___ ___       /\\_\\    ____  \r\n   \\ \\ \\   /' __` __`\\     \\/\\ \\  /',__\\ \r\n    \\_\\ \\__/\\ \\/\\ \\/\\ \\  __ \\ \\ \\/\\__, `\\\r\n    /\\_____\\ \\_\\ \\_\\ \\_\\/\\_\\_\\ \\ \\/\\____/\r\n    \\/_____/\\/_/\\/_/\\/_/\\/_/\\ \\_\\ \\/___/ \r\n                           \\ \\____/      \r\n                            \\/___/      \r\n*/\r\n\r\n(function(host) {\r\n  const o2s = {}.toString;\r\n  const isFun = f => {\r\n    return o2s.call(f) === \"[object Function]\";\r\n  };\r\n  const doc = document;\r\n  const head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\r\n\r\n  const currentScript = () => {\r\n    return doc.currentScript;\r\n  };\r\n  let uid = 0;\r\n  const uuid = () => {\r\n    return \"m-\" + (++uid).toString(32);\r\n  };\r\n  const rfile = /[^\\/]+?$/;\r\n  const normalize = path => {\r\n    path = path.replace(/\\\\/g, \"/\").replace(/\\/{2,}/g, \"/\");\r\n    let parts = path.split(\"/\"),\r\n      absolute = isAbsolute(path),\r\n      prefix = \"\";\r\n    if (absolute) prefix = parts[0] ? parts.shift() + \"//\" : \"\";\r\n    for (let i = 0; i < parts.length; ) {\r\n      if (parts[i] === \"..\") {\r\n        if (i > 0 && parts[i - 1] !== \"..\") parts.splice(--i, 2);\r\n        else if (absolute) parts.splice(i, 1);\r\n        else ++i;\r\n      } else if (parts[i] === \".\") parts.splice(i, 1);\r\n      else ++i;\r\n    }\r\n    return prefix + parts.join(\"/\");\r\n  };\r\n  const isAbsolute = path => {\r\n    return /^(?:\\/|\\w+:)/.test(path);\r\n  };\r\n  const dirname = path => {\r\n    return (\"\" + path).replace(rfile, \"\");\r\n  };\r\n  const filename = path => {\r\n    return (rfile.exec(\"\" + path) || [\"\"])[0];\r\n  };\r\n  const realpath = (id, dir) => {\r\n    dir = dir || \"\";\r\n    let url = \"\";\r\n    if (rfile.test(id)) {\r\n      id = /\\.js$/.test(id) ? id : `${id}.js`;\r\n    } else {\r\n      id = id + require.default;\r\n    }\r\n\r\n    if (isAbsolute(id)) {\r\n      url = id;\r\n    } else if (id[0] && id[0] in aliasRoots) {\r\n      url = replaceAliasRoots(id);\r\n    } else {\r\n      dir = replaceAliasRoots(dir);\r\n      url = dir ? `${dir}/${id}` : id;\r\n    }\r\n\r\n    return normalize(url);\r\n  };\r\n  const modules = {\r\n    // 'a' : {id:'a', deps:[], factory:(function(){}), dirname, filename, export:null}\r\n  };\r\n\r\n  const aliasRoots = {\r\n    get \"/\"() {\r\n      const loc = window.location;\r\n      return normalize(loc.origin + dirname(loc.pathname));\r\n    },\r\n    get \"@\"() {\r\n      let cwd = require.cwd;\r\n      if (isAbsolute(cwd)) {\r\n        return cwd;\r\n      } else {\r\n        return normalize(aliasRoots[\"/\"] + (require.cwd || \"./\"));\r\n      }\r\n    }\r\n  };\r\n  const replaceAliasRoots = (url = \"\") => {\r\n    return url.replace(/^[\\s\\S]/, a => {\r\n      if (a in aliasRoots) {\r\n        return aliasRoots[a];\r\n      } else {\r\n        return a;\r\n      }\r\n    });\r\n  };\r\n  const define = (...args) => {\r\n    const [id, deps, factory] = args;\r\n    let i, d, f;\r\n    const curScript = currentScript();\r\n    const moduleId = curScript && curScript.$id;\r\n    const moduleUrl = curScript && curScript.$url;\r\n    if (args.length == 1) {\r\n      [i, d, f] = [moduleId, [], id];\r\n    } else if (args.length == 2) {\r\n      [i, d, f] = [moduleId, id, deps];\r\n    } else if (args.length == 3) {\r\n      [i, d, f] = [id, deps, factory];\r\n    } else {\r\n      throw new Error(\"Arguments error.\");\r\n    }\r\n    return (modules[i] = modules[i] || {\r\n      id: i,\r\n      uuid: uuid(),\r\n      url: moduleUrl,\r\n      deps: d,\r\n      factory: f,\r\n      dirname: dirname(moduleUrl),\r\n      filename: filename(moduleUrl),\r\n      time: new Date().getTime()\r\n    });\r\n  };\r\n  const loadScript = (id, dir) => {\r\n    let url = realpath(id, dir);\r\n\r\n    return new Promise((resolve, reject) => {\r\n      const script = doc.createElement(\"script\");\r\n      script.addEventListener(\r\n        \"load\",\r\n        e => {\r\n          resolve(modules[id]);\r\n          head && script && script.parentNode && head.removeChild(script);\r\n        },\r\n        { once: true }\r\n      );\r\n      script.addEventListener(\r\n        \"error\",\r\n        e => {\r\n          reject(`Not Found Module: ${url}`);\r\n        },\r\n        { once: true }\r\n      );\r\n      script.$id = id;\r\n      script.$url = url;\r\n      script.src = url + (require.tag ? \"?\" + require.tag : \"\");\r\n      head.insertBefore(script, head.firstChild);\r\n    });\r\n  };\r\n  const hooks = {};\r\n  const setHook = (id, factory) => {\r\n    return (hooks[realpath(id)] = factory);\r\n  };\r\n  const getHook = id => {\r\n    const url = realpath(id);\r\n    return hooks[url] && define(id, [], hooks[url]);\r\n  };\r\n\r\n  const fetchModule = async (id, root, path = []) => {\r\n    const module = modules[id] || (await loadScript(id, root)) || getHook(id);\r\n\r\n    if (!module)\r\n      throw new Error(\r\n        `The module ${id} is not defined. You can define AMD module or use hook.`\r\n      );\r\n    // path.push(id);\r\n\r\n    const { deps = [], factory, dirname, filename } = module;\r\n\r\n    if (!(\"export\" in module)) {\r\n      module.export = await factory.apply(\r\n        { dirname, filename },\r\n        (await Promise.all(deps.map(did => fetchModule(did, dirname, path)))) ||\r\n          []\r\n      );\r\n    }\r\n    return module.export;\r\n  };\r\n\r\n  const require = async (id, callback) => {\r\n    id = id.trim();\r\n    let modulesExport = await fetchModule(id, require.cwd);\r\n    isFun(callback) && callback(modulesExport);\r\n    return modulesExport;\r\n  };\r\n\r\n  define.amd = true;\r\n\r\n  host.define = define;\r\n\r\n  host.require = require;\r\n\r\n  require.modules = modules;\r\n\r\n  require.default = \"\";\r\n\r\n  require.cwd = \"\";\r\n\r\n  require.tag = \"\";\r\n\r\n  require.main = \"\";\r\n\r\n  require.setHook = setHook;\r\n\r\n  const curScript = currentScript();\r\n  if (curScript) {\r\n    try {\r\n      const attr = curScript.attributes;\r\n      [\"cwd\", \"tag\", \"main\", \"default\"].forEach(key => {\r\n        let a;\r\n        if ((a = attr[`data-${key}`])) {\r\n          require[key] = a.nodeValue;\r\n        }\r\n      });\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  if (!window.__IM_DONOT_AUTO_RUN__ && require.main) require(require.main);\r\n})(window);\r\n"]}