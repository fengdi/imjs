{"version":3,"sources":["../im.js"],"names":[],"mappings":"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","file":"im.min.js","sourcesContent":["/*\r\n ______                                  \r\n/\\__  _\\                    __           \r\n\\/_/\\ \\/     ___ ___       /\\_\\    ____  \r\n   \\ \\ \\   /' __` __`\\     \\/\\ \\  /',__\\ \r\n    \\_\\ \\__/\\ \\/\\ \\/\\ \\  __ \\ \\ \\/\\__, `\\\r\n    /\\_____\\ \\_\\ \\_\\ \\_\\/\\_\\_\\ \\ \\/\\____/\r\n    \\/_____/\\/_/\\/_/\\/_/\\/_/\\ \\_\\ \\/___/ \r\n                           \\ \\____/      \r\n                            \\/___/      \r\n*/\r\n\r\n(function(host) {\r\n  const o2s = {}.toString;\r\n  const isFun = f => {\r\n    return o2s.call(f) === \"[object Function]\";\r\n  };\r\n  const doc = document;\r\n  const head = doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\r\n  const rfile = /[^\\/]+?$/;\r\n  const isAbsolute = path => {\r\n    return /^(?:\\/|@|\\w+:)/.test(path);\r\n  };\r\n  const currentScript = () => {\r\n    return doc.currentScript;\r\n  };\r\n  const normalize = path => {\r\n    path = path.replace(/\\\\/g, \"/\").replace(/\\/{2,}/g, \"/\");\r\n    let parts = path.split(\"/\"),\r\n      absolute = isAbsolute(path),\r\n      prefix = \"\";\r\n    if (absolute) prefix = parts.shift() + \"//\";\r\n    for (let i = 0; i < parts.length; ) {\r\n      if (parts[i] === \"..\") {\r\n        if (i > 0 && parts[i - 1] !== \"..\") parts.splice(--i, 2);\r\n        else if (absolute) parts.splice(i, 1);\r\n        else ++i;\r\n      } else if (parts[i] === \".\") parts.splice(i, 1);\r\n      else ++i;\r\n    }\r\n    return prefix + parts.join(\"/\");\r\n  };\r\n  const dirname = path => {\r\n    if (!path.match(/\\//)) {\r\n      return \"./\";\r\n    }\r\n    return path.replace(rfile, \"\");\r\n  };\r\n  const filename = path => {\r\n    return (rfile.exec(path) || [\"\"])[0];\r\n  };\r\n  const realpath = (id, dir) => {\r\n    const cwd = require.cwd;\r\n    const a = doc.createElement(\"a\");\r\n    if (rfile.test(id)) {\r\n      id = /\\.js$/.test(id) ? id : `${id}.js`;\r\n    } else {\r\n      id = id + require.default;\r\n    }\r\n    a.href = normalize(\r\n      isAbsolute(id) ? id.replace(/^@\\//, `${cwd}/`) : `${dir || cwd}/${id}`\r\n    );\r\n\r\n    return normalize(a.href);\r\n  };\r\n  const modules = {\r\n    // 'a' : {id:'a', deps:[], factory:(function(){}), dirname, filename, export:null}\r\n  };\r\n  \r\n  const define = ( ...args ) => {\r\n    const [id, deps, factory] = args;\r\n    let i, d, f;\r\n    const curScript = currentScript();\r\n    const moduleId = curScript && curScript.$moduleId;\r\n    if (args.length == 1) {\r\n      [i, d, f] = [moduleId, [], id];\r\n    } else if (args.length == 2) {\r\n      [i, d, f] = [moduleId, id, deps];\r\n    } else if (args.length == 3) {\r\n      [i, d, f] = [id, deps, factory];\r\n    } else {\r\n      throw new Error(\"Arguments error.\");\r\n    }\r\n    return modules[i] = {\r\n      id: i,\r\n      deps: d,\r\n      factory: f,\r\n      dirname: dirname(i),\r\n      filename: filename(i),\r\n      time: new Date().getTime()\r\n    };\r\n  };\r\n  const loadScript = url => {\r\n    return new Promise((resolve, reject) => {\r\n      const script = doc.createElement(\"script\");\r\n      script.addEventListener(\r\n        \"load\",\r\n        e => {\r\n          resolve(modules[url])\r\n        },\r\n        { once: true }\r\n      );\r\n      script.addEventListener(\r\n        \"error\",\r\n        e => {\r\n          reject(`Not Found Module: ${url}`);\r\n        },\r\n        { once: true }\r\n      );\r\n      script.$moduleId = url;\r\n      script.src = url + (require.tag ? \"?\" + require.tag : \"\");\r\n      head.insertBefore(script, head.firstChild);\r\n    });\r\n  };\r\n  const hooks = {};\r\n  const setHook = (id, factory) =>{\r\n    return hooks[realpath(id)] = factory;\r\n  }\r\n  const getHook = id => {\r\n    const url = realpath(id);\r\n    return hooks[url] && define(id, [], hooks[url])\r\n  }\r\n  const require = async function(id, callback) {\r\n\r\n    const url = realpath(id);\r\n    \r\n    const module = modules[url] || await loadScript(url) || getHook(id);\r\n\r\n    if (!module) throw new Error(`The module ${id} is not defined. You can define AMD module or use hook.`);\r\n    \r\n    const { deps = [], factory, dirname, filename } = module;\r\n\r\n    if (!(\"export\" in module)) {\r\n      module.export = await factory.apply(\r\n        { dirname, filename },\r\n        (await Promise.all(deps.map(did => require(realpath(did, dirname))))) ||\r\n          []\r\n      );\r\n      isFun(callback) && callback(module.export);\r\n    }\r\n\r\n    return module.export;\r\n  };\r\n\r\n  define.amd = true;\r\n\r\n  host.define = define;\r\n\r\n  host.require = require;\r\n\r\n  require.modules = modules;\r\n\r\n  require.default = \"\";\r\n\r\n  require.cwd = \"\";\r\n\r\n  require.tag = \"\";\r\n\r\n  require.main = \"\";\r\n\r\n  require.setHook = setHook;\r\n  \r\n  const curScript = currentScript();\r\n  if (curScript) {\r\n    try {\r\n      const attr = curScript.attributes;\r\n      [\"cwd\", \"tag\", \"main\", \"default\"].forEach(key => {\r\n        let a;\r\n        if ((a = attr[`data-${key}`])) {\r\n          require[key] = a.nodeValue;\r\n        }\r\n      });\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  if (require.main) require(require.main);\r\n})(window);\r\n"]}