//im.js v1.3 2014-06-10T22:05:02.754Z
(function(l){function s(a,c){var b=this;b.file=a;b.pkg=0;b.state=A;b.deps=c||[];b.factory=p;b.exports=p;b._on={};b.on=function(a,c){b._on[a]=b._on[a]||[];c?b._on[a].push(c):(!isNaN(a)&&b.state<a&&(b.state=a),h(b._on[a],function(a){a.call(b)}))};b.on(q,function(){e.checkCycle(b.file)||b.loadDeps(function(){b.compile.apply(b,arguments)})})}function y(a,c){var b=arguments,d=g.getPath(z()),x=[],f=r;1==b.length?f=a:(x=a,f=c);(b=e.get(d))?(b.deps=x,b.factory=f,b.on(m)):t("Can't find module:"+d,"error")}
var p=void 0,j=document,n=[],r=function(){},u=/^(\w+:\/\/\/?)(.*)/,B=/loaded|complete|undefined|interactive/,A=1,m=3,q=4,h=n.forEach?function(a,c){a.forEach(c)}:function(a,c){for(var b=0,d=a.length;b<d;b++)c(a[b],b,a)},C=n.indexOf?function(a,c){return a.indexOf(c)}:function(a,c){for(var b=0,d=a.length;b<d;b++)if(c===a[b])return b;return-1},v=function(a,c){for(var b in c)a[b]=c[b];return a},k=function(a,c){var b={}.toString,b=null===a?"null":a===p&&"undefined"||b.call(a).slice(8,-1).toLowerCase();
return c?b===c:b},t=function(a,c){if("console"in l)console[c||"log"](a)},g={normalize:function(a){var c,b="";if(c=a.match(u))b=c[1],a=c[2];if(-1===a.indexOf("."))return b+a;c=a.split("/");var d=[];h(c,function(b){if(""!=b)if(".."===b){if(0===d.length)throw Error("The path is invalid: "+a);d.pop()}else"."!==b&&d.push(b)});return b+d.join("/").replace(":80/","/")},hostRoot:function(a){var c="",b="";if(a=a.match(u))c=a[1],b=a[2].split("/")[0];return c+b+"/"},dirname:function(a){return!a.match(/\//)?
"./":a.replace(/\/[^\/]+\/?$/g,"")},isAP:function(a){return!!a.match(u)},getPath:function(a){if(!g.isAP(a)){var c=(location.href+"").replace(/(\?|#).*$/i,""),c=a.match(/^\/|\\/g)?g.hostRoot(c):g.dirname(c.match(/\/|\\$/g)?c+"i":c);a=c+"/"+a}return a}},z=function(){if(j.currentScript)return j.currentScript.src;for(var a=j.scripts||j.getElementsByTagName("script"),c=a.length-1;-1<c;c--)if(/interactive/.test(a[c].readyState))return a[c].src;var b;try{arguments.length()}catch(d){b=d.stack||l.opera&&((d+
"").match(/of linked script \S+/g)||[]).join(" ")}b=b.split(/[@ ]/g).pop();b=b.replace(/^\(/,"").replace(/\)$/,"");return b.replace(/(:\d+)?:\d+(\s)?$/i,"")},n=g.getPath(z()),w={path:n,tag:"?t="+ +new Date};v(s.prototype,{load:function(){var a=this,c=j.getElementsByTagName("head")[0]||j.documentElement,b=j.createElement("script");b.type="text/javascript";b.async="async";b.src=a.file;b.onerror=function(){e.remove(a.file)};b.onload=b.onreadystatechange=function(){if(B.test(b.readyState)&&(a.on(2),b&&
(b.onerror=b.onload=b.onreadystatechange=null),c&&b&&b.parentNode&&c.removeChild(b),b=p,a.state<m)){var d=e.get(a.file);a==d&&(a.deps=[],a.factory=r,a.on(m))}};c.insertBefore(b,c.firstChild)},compile:function(){var a=this.factory;this.exports=k(a,"function")?a.apply({},arguments):a;this.state=5;this.on(5)},loadDeps:function(a){e.load(this.deps,a)}});var e={data:{},set:function(a,c){this.data[a]=c},get:function(a){return this.data[a]},remove:function(a){delete this.data[a]},checkCycle:function(a,c){var b,
d,e=!1;b=this.data[a];c=c||[];if(b){b=k(b.deps,"array")?b.deps:[b.deps];for(b=this.realpaths(b);d=b.shift();)if(-1==C(c,d))if(c.push(d),e=this.checkCycle(d,c))break;else c.pop();else return c.push(d),t("Circular dependencies:\r\n"+c.join(" >>\r\n"),"error"),!0}return e},exports:function(a){var c=this,b=[];h(a,function(a){a=c.get(a);b.push(a&&a.exports)});return b},isOk:function(a){var c=this,b=1;h(a,function(a){a=c.data[a];if(!a||5>a.state)b=0});return b},realpaths:function(a){var c=[];k(a,"array")||
(a=[a]);h(a,function(a){a=(a||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");g.isAP(a)||(a=g.normalize(g.dirname(w.path)+"/"+a));/\.js$/.test(a)||(a+=".js");a+=w.tag||"";c.push(a)});return c},load:function(a,c){var b=this,d=!1;a=b.realpaths(a);0==a.length?c():h(a,function(e){var f=b.get(e);if(f){if(f.pkg&&f.state<q)f.on(q)}else f=new s(e),f.on(m,function(){f.on(q)}),setTimeout(function(){f.load()},1),b.set(e,f);if(5>f.state)f.on(5,function(){b.isOk(a)&&c.apply(l,b.exports(a))});else b.isOk(a)&&!d&&
(d=!0,c.apply(l,b.exports(a)))})}};y.tmd=!0;v(l,{define:y,require:function(a,c){if(1<arguments.length)e.load(a||[],function(){(c||r).apply(this,arguments)});else if(k(a,"array")||k(a,"string"))e.load(a,r);else if(k(a,"function"))return a()},defines:function(a){h(a,function(a){var b=e.realpaths(a.uri)[0],d=new s(b,a.deps);e.set(b,d);d.factory=a.factory;d.pkg=1;d.on(m)})},Im:{modules:e.data,im:"1.3",log:t,imPath:n,config:function(a){return v(w,a||{})}}})})(this);
